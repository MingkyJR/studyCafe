<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
          "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="mapper.user_info">
 	
 	<!-- 로그인 및 회원가입관련 -->
 	<!-- 쿼리 들어가야됨 -->
 	
 	<!-- ★★★회원가입 관련 -->
 	
 	<!-- 01.회원목록 -->
 		<select id="user_list" resultType="com.studycafe.userinfo.domain.User_info">
 			<![CDATA[
 			SELECT u_number,u_name,u_id,u_pass,u_grade,u_tell,u_gender,u_credate
			FROM user_info;
 			]]>
 		</select>
 	
 	
	<!-- 02회원정보 등록 -->
		<insert id="user_insert">
			<![CDATA[
			INSERT INTO user_info(u_number,u_name,u_id,u_pass,u_grade,u_tell,u_gender)
			VALUES(seq_user_info.nextval,#{u_name},#{u_id},#{u_pass},1,#{u_tell},#{u_gender});
			]]>
		</insert>
	
	<!-- 회원정보 상세조회(회원정보 불러오기) -->
	<select id="user_list" resultType="com.studycafe.userinfo.domain.User_info">
 			<![CDATA[
 			SELECT u_number,u_name,u_id,u_pass,u_grade,u_tell,u_gender,u_credate
			FROM user_info
			WHERE u_id = #{u_id}
 			]]>
 		</select>
	
	<!-- 특정 회원조회 -->
	<select id="u_number" 
	        resultType="int"
	        parameterType="int">
	  <![CDATA[		
		select u_number from user_info where u_number=#{no}
	  ]]>
	</select>

	<!-- 회원정보 수정 / 마이페이지-->
	<update id="user_update">
		<![CDATA[
		UPDATE user_info
		SET 
		u_name = #{u_name},
		u_pass = #{u_pass},
		u_grade = #{u_grade},
		u_tell = #{u_tell},
		u_gender = #{u_gender},
		u_update = SYSDATE
		WHERE
		u_id = #{u_id}
		]]>
	</update>
	
	
	<!-- 회원 탈퇴(삭제) -->
	<delete id = "user_delete">
		DELETE FROM user_info
		WHERE u_id = #{u_id}
	</delete>
	
	<!-- 비밀번호 체크 -->
	<select id="check_Pass" resultType="int">
		SELECT COUNT(*)
		FROM user_info
		WHERE u_id = #{u_id} AND u_pass = #{u_pass}
	</select>
	
	
	
	
	<!-- ★★★로그인 관련 --> 

	<select id="loginCheck" resultType="String">
		 <![CDATA[	
			SELECT u_name
			FROM user_info
			WHERE u_id = #{u_id} AND u_pass = #{u_pass}
			]]>
	</select>
	
	<select id="view_user" resultType="com.studycafe.userinfo.domain.User_info">
		<![CDATA[	
			SELECT
			u_name,
			u_id,
			u_tell,
			u_gender,
			u_credate
			FROM user_info
			WHERE u_id = #{user_id} AND u_pass = #{user_pass}
		]]>
	</select>
	
 
 
 </mapper>